<!DOCTYPE html>
<html>

<head>
	<title>YouTube MP3 Downloader</title>
	<style>
		body {
			font-family: Arial, sans-serif;
			background-color: #f5f5f5;
		}

		h1 {
			text-align: center;
			margin-top: 50px;
			color: #333;
		}

		.container {
			width: 50%;
			margin: 50px auto;
			background-color: #fff;
			padding: 20px;
			box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
			border-radius: 10px;
		}

		label {
			display: block;
			margin-bottom: 10px;
			color: #333;
		}

		input[type="text"] {
			padding: 10px;
			border: 2px solid #ccc;
			border-radius: 4px;
			width: 97%;
		}

		button {
			background-color: #4CAF50;
			color: white;
			padding: 10px 20px;
			border: none;
			border-radius: 4px;
			cursor: pointer;
			margin-top: 10px;
		}

		button:hover {
			background-color: #45a049;
		}
	</style>
</head>

<body>
	<h1>YouTube MP3 Downloader</h1>
	<div class="container">
		<form id="download-form">
			<label for="url-input">Enter YouTube URL:</label>
			<input name="url" type="text" id="url-input"
				placeholder="Example: https://www.youtube.com/watch?v=dQw4w9WgXcQ">
			<button type="submit">Download</button>
		</form>
		<div id="result"></div>
	</div>
	<script>
		const form = document.getElementById('download-form');
		const resultDiv = document.getElementById('result');

		form.addEventListener('submit', async (event) => {
			event.preventDefault();
			const urlInput = document.getElementById('url-input');
			const url = urlInput.value.trim();

			resultDiv.innerHTML = ""
			if (!url) {
				resultDiv.innerHTML = '<p>Please enter a valid YouTube URL.</p>';
				return;
			}

			// Use a backend API to download the MP3 file and return the download link
			const response = await fetch('/download?url=' + encodeURIComponent(url));

			resultDiv.innerHTML = '<p>Downloading ...</p>';

			if (!response.ok) {
				const errorMessage = await response.text();
				resultDiv.innerHTML = '<p>Error: ' + errorMessage + '</p>';
				return;
			}

			const blob = await response.blob();
			const downloadLink = document.createElement('a');
			downloadLink.href = URL.createObjectURL(blob);
			downloadLink.download = url + ".mp3"
			document.body.appendChild(downloadLink);
			downloadLink.click();
			document.body.removeChild(downloadLink);

			resultDiv.innerHTML = '<p>Download is completed</p>';

		});

	</script>
</body>

</html>